webpackJsonp([2],{8:function(e,n,r){"use strict";function t(){a?u():i()}function o(e){for(var n="=".repeat((4-e.length%4)%4),r=(e+n).replace(/\-/g,"+").replace(/_/g,"/"),t=window.atob(r),o=new Uint8Array(t.length),i=0;i<t.length;++i)o[i]=t.charCodeAt(i);return o}function i(){var e=o(l);s.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e}).then(function(e){console.log("user is subscribed:",JSON.stringify(e)),a=!0,c()}).catch(function(e){console.log("failed to subscribe",e)})}function u(){s.pushManager.getSubscription().then(function(e){if(e)return e.unsubscribe()}).catch(function(e){console.log("err unsubscribe",e)}).then(function(){console.log("user is unsubscribed"),a=!1,c()})}function c(){a?(g.innerText="订阅成功",b.innerText="ok, we will message you at every time picture change. and thanks for your subscribe,you like is our chase."):(g.innerText="订阅图片",b.innerText="you can subscribe, then we will message you picture change. dont you want see new picture?its beatiful.")}var s=null,a=!1,l="BO_R6m8osilNmdOhEHk-KF0o1u-EPruOL1bDaISHwDwSLacPsh35Hg41nZpS00XeCLG-KbGEqx35x6PKsdZNVCk";!function(){var e=document.querySelector("button");"serviceWorker"in navigator&&"PushManager"in window?navigator.serviceWorker.register("sw.js").then(function(n){s=n,e.addEventListener("click",t,!0)}).catch(function(e){console.error("Service Worker Error",e)}):(console.warn("Push messaging is not supported"),e.textContent="Push Not Supported")}();var b=document.querySelector("p"),g=document.querySelector("button")}},[8]);
//# sourceMappingURL=registerSw.bbb5360efe11e16ce241.js.map